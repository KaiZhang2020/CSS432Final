<!-- HTML code for the client page -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Player Lobby</title>
</head>
<body>
  <input type="text" id="usernameInput" placeholder="Enter username">
  <button id="addButton">Add Username</button>

  <div id="playerList">Players List:</div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const net = require('net');
      const client = new net.Socket();
      const usernameInput = document.getElementById('usernameInput');

      // Function to add a new username
      function addUsername() {
        const username = usernameInput.value.trim();
        if (username) {
          client.connect(3001, 'localhost', () => {
            // Send the username to the server
            client.write(username);
          });
          usernameInput.value = ''; // Clear the input field after submission
        }
      }

      // Listen for data from the server (players list)
      client.on('data', (data) => {
        const players = JSON.parse(data.toString());
        console.log('Current players in the lobby:', players);
        // Update the UI with the new list of players
        const playerListElement = document.getElementById('playerList');
        if (playerListElement) {
          playerListElement.innerText = JSON.stringify(players);
        }
      });

      // Close event handling
      client.on('close', () => {
        console.log('Connection to lobby server closed');
      });

      // Add event listener to the button after DOM content is loaded
      const addButton = document.getElementById('addButton');
      if (addButton) {
        addButton.addEventListener('click', addUsername);
      }
    });
  </script>
</body>
</html>
